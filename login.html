<!DOCTYPE html>
<html>
<head>
  <title>LoveSongs App</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCOed1uYtjzkR1OpYS6z3-sbIVPQW6MohM",
        authDomain: "lovesongs-1285e.firebaseapp.com",
        projectId: "lovesongs-1285e",
        storageBucket: "lovesongs-1285e.appspot.com",
        messagingSenderId: "940749066428",
        appId: "1:940749066428:web:4bc067e8721fa576fe40b9",
        measurementId: "G-HLGV34NCB0"
      };

      // Initialize Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const analytics = firebase.getAnalytics(app);

      // Initialize Firebase Authentication and Firestore
      const auth = firebase.auth();
      const db = firebase.firestore();

      // Function to register a new user
      async function registerUser(email, password, username) {
        try {
          const userCredential = await auth.createUserWithEmailAndPassword(email, password);
          const user = userCredential.user;

          // Save user info to Firestore
          await db.collection('users').doc(user.uid).set({
            username: username,
            email: email,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });

          console.log('User registered successfully:', user);
        } catch (error) {
          console.error('Error registering user:', error.message);
        }
      }

      // Function to login a user
      async function loginUser(email, password) {
        try {
          const userCredential = await auth.signInWithEmailAndPassword(email, password);
          const user = userCredential.user;
          console.log('User logged in successfully:', user);
        } catch (error) {
          console.error('Error logging in user:', error.message);
        }
      }

      // Handle register form submission
      document.getElementById('register-form').addEventListener('submit', async (event) => {
        event.preventDefault();
        const username = document.getElementById('register-username').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;
        await registerUser(email, password, username);
      });

      // Handle login form submission
      document.getElementById('login-form').addEventListener('submit', async (event) => {
        event.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        await loginUser(email, password);
      });
    });
  </script>
</head>
<body>
  <h1>Register</h1>
  <form id="register-form">
    <input type="text" id="register-username" placeholder="Username" required>
    <input type="email" id="register-email" placeholder="Email" required>
    <input type="password" id="register-password" placeholder="Password" required>
    <button type="submit">Register</button>
  </form>

  <h1>Login</h1>
  <form id="login-form">
    <input type="email" id="login-email" placeholder="Email" required>
    <input type="password" id="login-password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>
</body>
</html>
